<!DOCTYPE html>
<html>
<head>
  <title>WebSocket Playground</title>
</head>
<body>
</body>
<script>
const ws = new WebSocket('ws://localhost:3000');
// ws.addEventListener('open', () => {
//   const data = { message: 'Hello from the client!' }
//   const json = JSON.stringify(data);
//   console.log("client open");
//   ws.send(json);
//   setInterval(() => {
//     ws.send(json);
//   }, 1000);
// });
ws.addEventListener('message', event => {
  console.log("client message");
  const data = JSON.parse(event.data);
  console.log(data);
});
ws.onopen = () => {
  const hello = "hello";
  ws.send(JSON.stringify({hello}));
  console.log("close");
  setTimeout(() => {
    ws.close();
  }, 1000)
  // ws.close();
}
// window.onbeforeunload = function() {
//     ws.onclose = function () {}; // disable onclose handler first
//     ws.close();
// };
ws.onclose = () => {
  console.log("client on close");
};
;
// setTimeout(() => {
//   ws.close();
//   console.log("close");
// }, 10000);

</script>
</html>